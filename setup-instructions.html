<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Supabase - Arte & Anima</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .step { background: #f5f5f5; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .code { background: #333; color: #fff; padding: 15px; border-radius: 4px; overflow-x: auto; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üöÄ Setup Supabase per Arte & Anima</h1>
    
    <div class="warning">
        <strong>‚ö†Ô∏è IMPORTANTE:</strong> Segui questi passaggi nell'ordine per configurare il database.
    </div>

    <div class="step">
        <h2>1. Crea account Supabase (GRATUITO)</h2>
        <ol>
            <li>Vai su <a href="https://supabase.com" target="_blank">supabase.com</a></li>
            <li>Clicca "Start your project"</li>
            <li>Registrati con GitHub o email</li>
            <li>Crea un nuovo progetto</li>
            <li>Scegli una password per il database</li>
            <li>Aspetta che il progetto sia pronto (2-3 minuti)</li>
        </ol>
    </div>

    <div class="step">
        <h2>2. Crea le tabelle nel database</h2>
        <p>Nel tuo progetto Supabase, vai su <strong>SQL Editor</strong> e esegui questo codice:</p>
        <div class="code">
-- Tabella utenti
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password VARCHAR(255) NOT NULL,
  is_admin BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Tabella video
CREATE TABLE videos (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  title VARCHAR(500) NOT NULL,
  url VARCHAR(500) NOT NULL,
  description TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Indici per performance
CREATE INDEX idx_videos_user_id ON videos(user_id);
CREATE INDEX idx_videos_created_at ON videos(created_at);
        </div>
    </div>

    <div class="step">
        <h2>3. Configura le credenziali</h2>
        <ol>
            <li>Nel tuo progetto Supabase, vai su <strong>Settings ‚Üí API</strong></li>
            <li>Copia il <strong>Project URL</strong></li>
            <li>Copia la <strong>anon public key</strong></li>
            <li>Apri il file <code>js/supabase-config.js</code></li>
            <li>Sostituisci i valori:</li>
        </ol>
        <div class="code">
this.supabaseUrl = 'https://tuoprogetto.supabase.co'
this.supabaseKey = 'la-tua-anon-key-qui'
        </div>
    </div>

    <div class="step">
        <h2>4. Aggiorna i file HTML</h2>
        <p>In TUTTI i file HTML, sostituisci questa riga:</p>
        <div class="code">
&lt;script src="js/api.js"&gt;&lt;/script&gt;
        </div>
        <p>Con queste righe:</p>
        <div class="code">
&lt;script src="js/supabase-config.js"&gt;&lt;/script&gt;
&lt;script src="js/database.js"&gt;&lt;/script&gt;
&lt;script src="js/api-new.js"&gt;&lt;/script&gt;
        </div>
    </div>

    <div class="step">
        <h2>5. Test e Deploy</h2>
        <ol>
            <li>Apri il sito in locale per testare</li>
            <li>Prova registrazione e login</li>
            <li>Prova aggiunta video</li>
            <li>Se tutto funziona, fai push su GitHub</li>
            <li>Attiva GitHub Pages</li>
        </ol>
    </div>

    <div class="warning">
        <strong>üí° FALLBACK:</strong> Se Supabase non √® configurato, il sistema user√† automaticamente localStorage come prima!
    </div>

    <h2>üéØ Vantaggi della nuova versione:</h2>
    <ul>
        <li>‚úÖ Database reale condiviso tra tutti gli utenti</li>
        <li>‚úÖ Dati persistenti (non si perdono)</li>
        <li>‚úÖ Funziona su qualsiasi dispositivo</li>
        <li>‚úÖ Fallback automatico a localStorage</li>
        <li>‚úÖ Stessa interfaccia di prima</li>
        <li>‚úÖ Deploy su GitHub Pages</li>
    </ul>
</body>
</html>
